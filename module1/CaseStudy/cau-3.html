<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cau 3</title>
</head>

<body>
    <script>
        const input = prompt("Nhap vao dd/MM/yyyy", "01/01/2020");
        function isLeapYear(year) {
            const isDivisibleBy4 = year % 4 == 0;
            const isDivisibleBy100 = year % 100 == 0;
            const isDivisibleBy400 = year % 400 == 0;
            if (isDivisibleBy4) {
                if (isDivisibleBy100) {
                    if (isDivisibleBy400) {
                        return true;
                    }
                } else {
                    return false;
                }
            }
        }
        const daysNormalYear = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
        const daysLeapYear = [31, 29, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
        function checkInput(input) {
            const regexp = /^[0-3][0-9]\/[0-1][1-9]\/[0-9]{4}$/;
            if (regexp.test(input)) {
                const year = parseInt(input.substr(6, 4));
                const month = parseInt(input.substr(3, 2));
                const day = parseInt(input.substr(0, 2));
                if (isLeapYear(year)) {
                    if (month <= 12 && day < daysLeapYear[month]) {
                        return true;
                    }
                } else {
                    if (month <= 12 && day < daysNormalYear[month]) {
                        return true;
                    }
                }
                return false;
            }
            return false;
        }
        if (checkInput(input)) {
            const year = parseInt(input.substr(6, 4));
            const month = parseInt(input.substr(3, 2));
            const day = parseInt(input.substr(0, 2));
            let sum = day;
            if (isLeapYear(year)) {
                for (let i = 0; i < month - 1; i++) {
                    sum += daysLeapYear[i];
                }
            } else {
                for (let i = 0; i < month - 1; i++) {
                    sum += daysNormalYear[i];
                }
            }
            document.write(`${input} : ${sum}`);
        } else {
            alert("Vui long nhap dung ngay, thang, nam dd/MM/yyyy");
        }
    </script>
</body>

</html>